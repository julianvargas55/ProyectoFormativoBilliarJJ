package sena.jj.com.controller;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;
import java.util.Map;
public class PedidoController {
	// Archivo: PedidoController.java (EJEMPLO con Java/Spring Boot)

	import org.springframework.web.bind.annotation.*;
	// ... otras importaciones ...

	@RestController
	@RequestMapping("/api")
	public class PedidoController {

	    // [Inyección del servicio de base de datos aquí]

	    // Esta ruta debe coincidir con la URL en el JavaScript: /api/guardar-pedido
	    @PostMapping("/guardar-pedido")
	    public ResponseEntity<?> guardarPedido(@RequestBody List<Map<String, Object>> productos) {
	        // 'productos' es ahora una lista de objetos:
	        // [{"nombre": "Coca-Cola", "precio": 2.50}, {"nombre": "Hamburguesa", "precio": 8.00}, ...]
	        
	        // 1. LLAMAR AL SERVICIO DE BASE DE DATOS
	        // Aquí pasas esta lista 'productos' a tu capa de Servicio para que sepa qué guardar.
	        // pedidoService.procesarYGuardar(productos);
	        
	        // 2. Devolver una respuesta de éxito al navegador (JavaScript)
	        return ResponseEntity.ok(Map.of("mensaje", "Pedido recibido y procesado"));
	    }
	}
}
